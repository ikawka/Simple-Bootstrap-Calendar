/*! https://github.com/tlindig/position-calculator */
!function(a){"function"==typeof define&&define.amd?define("position-calculator",["jquery"],a):jQuery.PositionCalculator=a(jQuery)}(function(a){"use strict";function b(a){return"string"==typeof a&&("window"===a?a=q:"document"===a&&(a=r)),a}function c(a){var b=a.split(" ");return{y:t.test(b[0])?b[0]:"top",x:u.test(b[1])?b[1]:"left"}}function d(a,b){return a===b?!0:a&&b?a.top===b.top&&a.left===b.left&&a.height===b.height&&a.width===b.width:!1}function e(b){var c=b[0];if(9===c.nodeType)return{width:b.outerWidth(),height:b.outerHeight(),top:0,left:0};if(a.isWindow(c))return{width:b.outerWidth(),height:b.outerHeight(),top:b.scrollTop(),left:b.scrollLeft()};if(c.preventDefault)return{width:0,height:0,top:c.pageY,left:c.pageX};var d=b.offset();return{width:b.outerWidth(),height:b.outerHeight(),top:d.top,left:d.left}}function f(b,c){var d=b[0];if(9!==d.nodeType){if(a.isWindow(d)&&(c.top=b.scrollTop(),c.left=b.scrollLeft()),d.preventDefault)return c.top=d.pageY,void(c.left=d.pageX);var e=b.offset();c.top=e.top,c.left=e.left}}function g(b){var c,d=b[0];return 9===d.nodeType?(d=s,c={top:0,left:0}):a.isWindow(d)?(d=s,c={top:b.scrollTop(),left:b.scrollLeft()}):c=b.offset(),{width:d.clientWidth,height:d.clientHeight,top:c.top+d.clientTop,left:c.left+d.clientLeft}}function h(b,c){var d,e=b[0];9===e.nodeType?(e=s,d={top:0,left:0}):a.isWindow(e)?(e=s,d={top:b.scrollTop(),left:b.scrollLeft()}):d=b.offset(),c.top=d.top+e.clientTop,c.left=d.left+e.clientLeft}function i(a,b){return{y:parseFloat(a.y)*(v.test(a.y)?b.height/100:1),x:parseFloat(a.x)*(v.test(a.x)?b.width/100:1),mirror:a.mirror}}function j(a,b,c){var d={top:0,left:0,middle:.5*a.height,center:.5*a.width,bottom:a.height,right:a.width};return 0!==b.y&&(d.middle+=b.y,b.mirror?(d.top+="top"!==c.y?-1*b.y:b.y,d.bottom+="bottom"!==c.y?-1*b.y:b.y):(d.top+=b.y,d.bottom+=b.y)),0!==b.x&&(d.center+=b.x,b.mirror?(d.left+="left"!==c.x?-1*b.x:b.x,d.right+="right"!==c.x?-1*b.x:b.x):(d.left+=b.x,d.right+=b.x)),d}function k(a){var b=[];return a.top>0&&b.push("top"),a.left>0&&b.push("left"),a.bottom<0&&b.push("bottom"),a.right<0&&b.push("right"),a.overflow=b.length?b:null,a}function l(a,b){var c={top:a.top-b.top,left:a.left-b.left,bottom:a.top+a.height-(b.top+b.height),right:a.left+a.width-(b.left+b.width),overflow:[]};return k(c)}function m(a,b,c,d){var e,f,g,h={y:b.y,x:b.x},i={y:c.y,x:c.x};if(-1!==d.overflow.indexOf("top")&&(e="top"),-1!==d.overflow.indexOf("bottom")&&(e=e?null:"bottom"),-1!==d.overflow.indexOf("left")&&(f="left"),-1!==d.overflow.indexOf("right")&&(f=f?null:"right"),!e&&!f)return null;switch(a=a===!0?"both":a,g=0,a){case"item":g=1;break;case"target":g=2;break;case"both":g=3}return 1&g&&(e&&(h.y=w[h.y]),f&&(h.x=w[h.x])),2&g&&(e&&(i.y=w[i.y]),f&&(i.x=w[i.x])),{item_at:h,tar_at:i}}function n(a,b,c){var d,e,f,g,h;return h=c?["top","bottom"]:["left","right"],d=a[h[0]],f=b[h[0]],e=-1*a[h[1]],g=-1*b[h[1]],0>d&&(d=0),0>e&&(e=0),0>f&&(f=0),0>g&&(g=0),0>d&&0>e?!0:0>f&&0>g?!1:f+g>d+e}function o(a,b){"all"===b&&(b=!0);var c=a.distance.overflow;if(!c.length)return a;for(var d,e,f=!1,g=!1,h=c.length-1;h>=0;h--)switch(d=c[h]){case"top":case"bottom":(!g&&b===!0||-1!==b.indexOf(d))&&(e=a.distance[d],a.moveBy.y+=e,a.distance.top-=e,a.distance.bottom-=e,g=!0);break;case"left":case"right":(!f&&b===!0||-1!==b.indexOf(d))&&(e=a.distance[d],a.moveBy.x+=e,a.distance.left-=e,a.distance.right-=e,f=!0)}return k(a.distance),a}function p(a){return this instanceof p?(this.options=this.$itm=this.$trg=this.$bnd=this.itmAt=this.trgAt=this.itmPos=this.trgPos=this.bndPos=this.itmOffset=this.trgOffset=null,void this._init(a)):new p(a)}var q=window,r=document,s=r.documentElement,t=/top|middle|bottom/,u=/left|center|right/,v=/%$/,w={left:"right",center:"center",right:"left",top:"bottom",middle:"middle",bottom:"top"};return p.prototype._init=function(d){var e=this.options=a.extend({},p.defaults,d);return e.item?(this.$itm=e.item.jquery?e.item:a(e.item),0===this.$itm.length?null:(this.$trg=e.target&&e.target.jquery?e.target:a(b(e.target)),this.$bnd=e.boundary&&e.boundary.jquery?e.boundary:a(b(e.boundary)),this.itmAt=c(e.itemAt),this.trgAt=c(e.targetAt),this.resize(),this)):null},p.prototype.resize=function(){var a=this.options,b=e(this.$itm),c=this.$trg.length?e(this.$trg):null;if(this.bndPos=this.$bnd.length?g(this.$bnd):null,!this.itmPos||!d(b,this.itmPos)){this.itmPos=b;var f=i(a.itemOffset,b);f.x=-1*f.x,f.y=-1*f.y,this.itmOffset=j(b,f,this.itmAt)}return this.trgPos&&d(c,this.trgPos)||(this.trgPos=c,c&&(this.trgOffset=j(c,i(a.targetOffset,c),this.trgAt))),this},p.prototype.calcVariant=function(a,b){var c={moveBy:null,distance:null,itemAt:null,targetAt:null};if(this.trgPos&&a&&b){var d={top:this.trgPos.top+this.trgOffset[b.y],left:this.trgPos.left+this.trgOffset[b.x]},e={top:d.top-this.itmOffset[a.y],left:d.left-this.itmOffset[a.x],height:this.itmPos.height,width:this.itmPos.width};c.moveBy={y:e.top-this.itmPos.top,x:e.left-this.itmPos.left},c.distance=this.bndPos?l(this.bndPos,e):null,c.itemAt=a.y+" "+a.x,c.targetAt=b.y+" "+b.x}else c.moveBy={y:0,x:0},c.distance=this.bndPos?l(this.bndPos,this.itmPos):null;return c},p.prototype.calculate=function(){if(null===this.itmPos)return null;var a=this.options;f(this.$itm,this.itmPos),this.trgPos&&f(this.$trg,this.trgPos),this.bndPos&&h(this.$bnd,this.bndPos);var b=this.calcVariant(this.itmAt,this.trgAt);if(!b.distance||!b.distance.overflow)return b;if(a.flip&&"none"!==a.flip&&this.trgPos){var c,d=m(a.flip,this.itmAt,this.trgAt,b.distance);if(d){if(c=this.calcVariant(d.item_at,d.tar_at),!c.distance.overflow)return c;var e={y:!1,x:!1};if(e.y=n(c.distance,b.distance,!0),e.x=n(c.distance,b.distance,!1),e.y!==e.x){if(b=this.calcVariant({y:e.y?d.item_at.y:this.itmAt.y,x:e.x?d.item_at.x:this.itmAt.x},{y:e.y?d.tar_at.y:this.trgAt.y,x:e.x?d.tar_at.x:this.trgAt.x}),!b.distance.overflow)return b}else e.y&&e.x&&(b=c)}}return a.stick&&"none"!==a.stick?o(b,a.stick):b},p.defaults={item:null,target:null,boundary:window,itemAt:"top left",targetAt:"top left",itemOffset:{y:0,x:0,mirror:!0},targetOffset:{y:0,x:0,mirror:!0},flip:"none",stick:"none"},p});

/*!
Simple Bootstrap Calendar
Version 0.1.0
https://github.com/ikawka/Simple-Bootstrap-Calendar
by ikawka August 2014
http://bulletproofscript.wordpress.com/
Sources/References
Basic Calendar
http://jszen.blogspot.com/2007/03/how-to-build-simple-calendar-with.html
Prevent Bootstrap dropdown from closing
http://stackoverflow.com/a/19797577
*/
(function(b){function n(b,k){this.month=isNaN(b)||null==b?g.getMonth():b;this.year=0!=f.yearRange?f.yearRange.split(":")[0]:isNaN(k)||null==k?g.getFullYear():k;this.html=""}function p(){var f=g.getMonth(),k=g.getFullYear(),f=new n(f,k);f.generateHTML();var a=b(f.getHTML());a.find("a.btn-next").click(function(){var a=g.getMonth(),c=g.getFullYear(),a=a+1;12==a&&(a=0,g.setFullYear(c+1));g.setMonth(a);b('[data-id="'+l+'"]').find(".dropdown-menu").empty().append(p())});a.find("a.btn-prev").click(function(){var a= g.getMonth(),c=g.getFullYear(),a=a-1;0>a&&(a=11,g.setFullYear(c-1));g.setMonth(a);b('[data-id="'+l+'"]').find(".dropdown-menu").empty().append(p())});a.find("select.simple-calendar-month").change(function(){var d=b(this).val(),c=a.find("select.simple-calendar-year").val();g.setFullYear(c);g.setMonth(d);b('[data-id="'+l+'"]').find(".dropdown-menu").empty().append(p())});a.find("select.simple-calendar-year").change(function(){a.find("select.simple-calendar-month").change()});a.find("button.btn-calendar-ok").click(function(){b('[data-id="'+ l+'"]').find(".simple-calendar-time").change()});return a}var u="Su Mo Tu We Th Fr Sa".split(" "),v="January February March April May June July August September October November December".split(" "),t="Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),w=[31,28,31,30,31,30,31,31,30,31,30,31],g=new Date,q=new Date,r=null,m="",s="12:00 AM",f,l="";n.prototype.generateHTML=function(){var b=(new Date(this.year,this.month,1)).getDay(),k=w[this.month];1==this.month&&(0==this.year%4&&0!=this.year% 100||0==this.year%400)&&(k=29);var a;a=this.month;if(!1!==f.changeMonth){for(var d='<select class="simple-calendar-month form-control">',c=0;c<t.length;c++)d+='<option value="'+c+'" '+(c==a?"selected":"")+">"+t[c]+"</option>";a='<div style="width: 60%; text-align: right">'+(d+"</select>")+"</div>"}else a='<div style="width: 60%; text-align: center; line-height: 22px;">'+v[a]+"</div>";d=this.year;if(!1!==f.changeYear){var c='<select class="simple-calendar-year form-control">',e=g.getFullYear(),h=[]; 0!=f.yearRange?h=f.yearRange.split(":"):(h[0]=e-10,h[1]=e+10);for(e=h[0];e<=h[1];e++)c+='<option value="'+e+'" '+(e==d?"selected":"")+">"+e+"</option>";d='<div style="width: 40%; text-align: left" class="pull-right">'+(c+"</select>")+"</div>"}else d='<div style="width: 40%; text-align: center; line-height: 22px" class="pull-right">'+d+"</div>";a='<table class="table table-condense table-striped table-bordered"><tr><th><a class="simple-calendar-move btn-prev glyphicon glyphicon-chevron-left" href="javascript:;"></a></th><th colspan="5" style="text-align:center; padding: '+ (!1!==f.changeMonth?"2":"4")+'px;">'+d+""+a+'</th><th><a class="simple-calendar-move btn-next glyphicon glyphicon-chevron-right" href="javascript:;"></a></th></tr><tr class="calendar-header">';for(d=0;6>=d;d++)a+='<td class="calendar-header-day">',a+=u[d],a+="</td>";a+="</tr><tr>";c=1;for(d=0;9>d;d++){h=this.month+1;for(e=0;6>=e;e++)if(c<=k&&(0<d||e>=b)){var l=this.year+"-"+(10>h?"0"+h:h)+"-"+(10>c?"0"+c:c);a+='<td><a href="javascript:;" class="day-item'+(this.month==q.getMonth()&&this.year==q.getFullYear()&& c==q.getDate()?" today":"")+(l==m?" selected":"")+'" data-date="'+l+'">';a+=c;a+="</a></td>";c++}else a+="<td></td>";if(c>k)break;else a+="</tr><tr>"}a+="</tr>";if(1==f.showTime){b="";k="00";c="AM";h="";for(d=0;24>d;)c=12>d?"AM":"PM",h=0==d?12:10>d?"0"+d:d,12<h&&(h=10>h-12?"0"+(h-12):h-12),c=h+":"+k+" "+c,b+='<option value="'+(10>d?"0"+d:d)+":"+k+'" '+(s==c?"selected":"")+">"+c+"</option>","30"==k?(k="00",d++):k="30";a+='<tr><td style="line-height: 22px; font-weight: bold; padding: 2px" align="center" colspan="2">Time: </td><td style="padding: 2px" colspan="3"><select class="simple-calendar-time form-control">'+ b+'</select></td><td style="line-height: 22px; font-weight: bold; padding: 2px" align="center" colspan="2"><button type="button" class="btn btn-default btn-xs btn-calendar-ok">Select</button></td></tr>'}this.html=a+"</table>"};n.prototype.getHTML=function(){return this.html};b.fn.simpleCalendar=function(n){f=b.extend({},{bsBtnClass:"btn-default",defaultText:"Select Date",dateFormat:"YYYY-MM-dd",maxDate:0,yearRange:!1,changeMonth:!1,changeYear:!1,showTime:!1},n);g.setHours(0);g.setMinutes(0);g.setSeconds(0); return this.each(function(k,a){b(a).hide();b(a).data("settings",JSON.stringify(f));var d=l=b(a).attr("id"),c=b(this).val();g=isNaN(Date.parse(c))?new Date:new Date(Date.parse(c));c=g.toISOString();m=c.split("T")[0];r=b('<div class="dropdown simple-calendar" data-id="'+d+'"><button class="btn '+f.bsBtnClass+' dropdown-toggle" type="button" data-toggle="dropdown"><div class="selected-text">'+f.defaultText+'</div> <span class="caret"></span></button><div class="dropdown-menu" role="menu" style="padding: 0" id="meals-calendar-container"></div></div>').on({"shown.bs.dropdown":function(){this.closable= !0},mousedown:function(a){a=b(a.target);a.hasClass("day-item")&&(b(this).find(".table a").removeClass("selected"),a.addClass("selected"))},click:function(e){e=b(e.target);this.closable=!0;if(e.hasClass("simple-calendar-move")||e.is("select")||e.is("option"))this.closable=!1;else if(e.hasClass("day-item")){1==f.showTime&&(this.closable=!1);e=m=e.attr("data-date");if(1==f.showTime){var c=s=b('[data-id="'+l+'"]').find(".simple-calendar-time option:selected").text();e+=" "+c}b.format&&(e=b.format.date((new Date(Date.parse(e))).toISOString(), f.dateFormat));b(a).val(e).change()}},"hide.bs.dropdown":function(){var a=this;setTimeout(function(){a.closable=!0},1E3);return this.closable},change:function(e){if(b(e.target).hasClass("simple-calendar-time")){1==f.showTime&&(this.closable=!1);e=m;if(1==f.showTime){var c=s=b('[data-id="'+l+'"]').find(".simple-calendar-time option:selected").text();e+=" "+c}b.format&&(e=b.format.date((new Date(Date.parse(e))).toISOString(),f.dateFormat));b(a).val(e).change()}},"shown.bs.dropdown.position-calculator":function(a, c){var d=b('[data-id="'+l+'"]').find(".dropdown-menu",a.target),f=c.relatedTarget;d.css({top:0,left:0});f=(new b.PositionCalculator({item:d,target:f,itemAt:"top left",itemOffset:{y:3,x:0,mirror:!0},targetAt:"bottom left",flip:"both"})).calculate();d.css({top:f.moveBy.y+"px",left:f.moveBy.x+"px"})}});r.find("button").click(function(){l=b(a).attr("id");f=JSON.parse(b(a).data("settings"));b(a).change()});b(a).after(r);b(a).change(function(){var a=b(this).val().replace(/\-/g,"/");if(isNaN(Date.parse(a))){g= new Date;var c=g.toISOString();m=c.split("T")[0]}else g=new Date(Date.parse(a)),c=g.toISOString(),m=c.split("T")[0],b.format&&(a=b.format.date((new Date(Date.parse(a))).toISOString(),f.dateFormat)),b('[data-id="'+l+'"]').find(".selected-text").text(a);b('[data-id="'+l+'"]').find(".dropdown-menu").empty().append(p())})})}})(jQuery);
