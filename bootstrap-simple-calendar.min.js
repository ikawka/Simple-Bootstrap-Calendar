/*! https://github.com/tlindig/position-calculator */
!function(a){"function"==typeof define&&define.amd?define("position-calculator",["jquery"],a):jQuery.PositionCalculator=a(jQuery)}(function(a){"use strict";function b(a){return"string"==typeof a&&("window"===a?a=q:"document"===a&&(a=r)),a}function c(a){var b=a.split(" ");return{y:t.test(b[0])?b[0]:"top",x:u.test(b[1])?b[1]:"left"}}function d(a,b){return a===b?!0:a&&b?a.top===b.top&&a.left===b.left&&a.height===b.height&&a.width===b.width:!1}function e(b){var c=b[0];if(9===c.nodeType)return{width:b.outerWidth(),height:b.outerHeight(),top:0,left:0};if(a.isWindow(c))return{width:b.outerWidth(),height:b.outerHeight(),top:b.scrollTop(),left:b.scrollLeft()};if(c.preventDefault)return{width:0,height:0,top:c.pageY,left:c.pageX};var d=b.offset();return{width:b.outerWidth(),height:b.outerHeight(),top:d.top,left:d.left}}function f(b,c){var d=b[0];if(9!==d.nodeType){if(a.isWindow(d)&&(c.top=b.scrollTop(),c.left=b.scrollLeft()),d.preventDefault)return c.top=d.pageY,void(c.left=d.pageX);var e=b.offset();c.top=e.top,c.left=e.left}}function g(b){var c,d=b[0];return 9===d.nodeType?(d=s,c={top:0,left:0}):a.isWindow(d)?(d=s,c={top:b.scrollTop(),left:b.scrollLeft()}):c=b.offset(),{width:d.clientWidth,height:d.clientHeight,top:c.top+d.clientTop,left:c.left+d.clientLeft}}function h(b,c){var d,e=b[0];9===e.nodeType?(e=s,d={top:0,left:0}):a.isWindow(e)?(e=s,d={top:b.scrollTop(),left:b.scrollLeft()}):d=b.offset(),c.top=d.top+e.clientTop,c.left=d.left+e.clientLeft}function i(a,b){return{y:parseFloat(a.y)*(v.test(a.y)?b.height/100:1),x:parseFloat(a.x)*(v.test(a.x)?b.width/100:1),mirror:a.mirror}}function j(a,b,c){var d={top:0,left:0,middle:.5*a.height,center:.5*a.width,bottom:a.height,right:a.width};return 0!==b.y&&(d.middle+=b.y,b.mirror?(d.top+="top"!==c.y?-1*b.y:b.y,d.bottom+="bottom"!==c.y?-1*b.y:b.y):(d.top+=b.y,d.bottom+=b.y)),0!==b.x&&(d.center+=b.x,b.mirror?(d.left+="left"!==c.x?-1*b.x:b.x,d.right+="right"!==c.x?-1*b.x:b.x):(d.left+=b.x,d.right+=b.x)),d}function k(a){var b=[];return a.top>0&&b.push("top"),a.left>0&&b.push("left"),a.bottom<0&&b.push("bottom"),a.right<0&&b.push("right"),a.overflow=b.length?b:null,a}function l(a,b){var c={top:a.top-b.top,left:a.left-b.left,bottom:a.top+a.height-(b.top+b.height),right:a.left+a.width-(b.left+b.width),overflow:[]};return k(c)}function m(a,b,c,d){var e,f,g,h={y:b.y,x:b.x},i={y:c.y,x:c.x};if(-1!==d.overflow.indexOf("top")&&(e="top"),-1!==d.overflow.indexOf("bottom")&&(e=e?null:"bottom"),-1!==d.overflow.indexOf("left")&&(f="left"),-1!==d.overflow.indexOf("right")&&(f=f?null:"right"),!e&&!f)return null;switch(a=a===!0?"both":a,g=0,a){case"item":g=1;break;case"target":g=2;break;case"both":g=3}return 1&g&&(e&&(h.y=w[h.y]),f&&(h.x=w[h.x])),2&g&&(e&&(i.y=w[i.y]),f&&(i.x=w[i.x])),{item_at:h,tar_at:i}}function n(a,b,c){var d,e,f,g,h;return h=c?["top","bottom"]:["left","right"],d=a[h[0]],f=b[h[0]],e=-1*a[h[1]],g=-1*b[h[1]],0>d&&(d=0),0>e&&(e=0),0>f&&(f=0),0>g&&(g=0),0>d&&0>e?!0:0>f&&0>g?!1:f+g>d+e}function o(a,b){"all"===b&&(b=!0);var c=a.distance.overflow;if(!c.length)return a;for(var d,e,f=!1,g=!1,h=c.length-1;h>=0;h--)switch(d=c[h]){case"top":case"bottom":(!g&&b===!0||-1!==b.indexOf(d))&&(e=a.distance[d],a.moveBy.y+=e,a.distance.top-=e,a.distance.bottom-=e,g=!0);break;case"left":case"right":(!f&&b===!0||-1!==b.indexOf(d))&&(e=a.distance[d],a.moveBy.x+=e,a.distance.left-=e,a.distance.right-=e,f=!0)}return k(a.distance),a}function p(a){return this instanceof p?(this.options=this.$itm=this.$trg=this.$bnd=this.itmAt=this.trgAt=this.itmPos=this.trgPos=this.bndPos=this.itmOffset=this.trgOffset=null,void this._init(a)):new p(a)}var q=window,r=document,s=r.documentElement,t=/top|middle|bottom/,u=/left|center|right/,v=/%$/,w={left:"right",center:"center",right:"left",top:"bottom",middle:"middle",bottom:"top"};return p.prototype._init=function(d){var e=this.options=a.extend({},p.defaults,d);return e.item?(this.$itm=e.item.jquery?e.item:a(e.item),0===this.$itm.length?null:(this.$trg=e.target&&e.target.jquery?e.target:a(b(e.target)),this.$bnd=e.boundary&&e.boundary.jquery?e.boundary:a(b(e.boundary)),this.itmAt=c(e.itemAt),this.trgAt=c(e.targetAt),this.resize(),this)):null},p.prototype.resize=function(){var a=this.options,b=e(this.$itm),c=this.$trg.length?e(this.$trg):null;if(this.bndPos=this.$bnd.length?g(this.$bnd):null,!this.itmPos||!d(b,this.itmPos)){this.itmPos=b;var f=i(a.itemOffset,b);f.x=-1*f.x,f.y=-1*f.y,this.itmOffset=j(b,f,this.itmAt)}return this.trgPos&&d(c,this.trgPos)||(this.trgPos=c,c&&(this.trgOffset=j(c,i(a.targetOffset,c),this.trgAt))),this},p.prototype.calcVariant=function(a,b){var c={moveBy:null,distance:null,itemAt:null,targetAt:null};if(this.trgPos&&a&&b){var d={top:this.trgPos.top+this.trgOffset[b.y],left:this.trgPos.left+this.trgOffset[b.x]},e={top:d.top-this.itmOffset[a.y],left:d.left-this.itmOffset[a.x],height:this.itmPos.height,width:this.itmPos.width};c.moveBy={y:e.top-this.itmPos.top,x:e.left-this.itmPos.left},c.distance=this.bndPos?l(this.bndPos,e):null,c.itemAt=a.y+" "+a.x,c.targetAt=b.y+" "+b.x}else c.moveBy={y:0,x:0},c.distance=this.bndPos?l(this.bndPos,this.itmPos):null;return c},p.prototype.calculate=function(){if(null===this.itmPos)return null;var a=this.options;f(this.$itm,this.itmPos),this.trgPos&&f(this.$trg,this.trgPos),this.bndPos&&h(this.$bnd,this.bndPos);var b=this.calcVariant(this.itmAt,this.trgAt);if(!b.distance||!b.distance.overflow)return b;if(a.flip&&"none"!==a.flip&&this.trgPos){var c,d=m(a.flip,this.itmAt,this.trgAt,b.distance);if(d){if(c=this.calcVariant(d.item_at,d.tar_at),!c.distance.overflow)return c;var e={y:!1,x:!1};if(e.y=n(c.distance,b.distance,!0),e.x=n(c.distance,b.distance,!1),e.y!==e.x){if(b=this.calcVariant({y:e.y?d.item_at.y:this.itmAt.y,x:e.x?d.item_at.x:this.itmAt.x},{y:e.y?d.tar_at.y:this.trgAt.y,x:e.x?d.tar_at.x:this.trgAt.x}),!b.distance.overflow)return b}else e.y&&e.x&&(b=c)}}return a.stick&&"none"!==a.stick?o(b,a.stick):b},p.defaults={item:null,target:null,boundary:window,itemAt:"top left",targetAt:"top left",itemOffset:{y:0,x:0,mirror:!0},targetOffset:{y:0,x:0,mirror:!0},flip:"none",stick:"none"},p});

/*!
Simple Bootstrap Calendar
Version 0.1.0
https://github.com/ikawka/Simple-Bootstrap-Calendar
by ikawka August 2014
http://bulletproofscript.wordpress.com/
Sources/References
Basic Calendar
http://jszen.blogspot.com/2007/03/how-to-build-simple-calendar-with.html
Prevent Bootstrap dropdown from closing
http://stackoverflow.com/a/19797577
*/
(function(c){function s(c,l){this.e=isNaN(c)||null==c?g.getMonth():c;this.c=isNaN(l)||null==l?g.getFullYear():l;this.l=""}function p(){var d=new s(g.getMonth(),g.getFullYear());d.r();d=c(d.l);d.find("a.btn-next").click(function(){var d=g.getMonth(),a=g.getFullYear(),d=d+1;12==d&&(d=0,g.setFullYear(a+1));g.setMonth(d);c('[data-id="'+k+'"]').find(".dropdown-menu").empty().append(p())});d.find("a.btn-prev").click(function(){var d=g.getMonth(),a=g.getFullYear();--d;0>d&&(d=11,--a,g.setFullYear(a));g.setMonth(d);
c('[data-id="'+k+'"]').find(".dropdown-menu").empty().append(p())});d.find("select.simple-calendar-month").a(function(){var d=c(this).b(),a=c('[data-id="'+k+'"]').find(".simple-calendar-year").b();g.setFullYear(a);g.setMonth(d);c('[data-id="'+k+'"]').find(".dropdown-menu").empty().append(p())});d.find("select.simple-calendar-year").a(function(){c('[data-id="'+k+'"]').find(".simple-calendar-month").a()});d.find("button.btn-calendar-ok").click(function(){c('[data-id="'+k+'"]').find(".simple-calendar-time").a()});
return d}var u="Su Mo Tu We Th Fr Sa".split(" "),v="January February March April May June July August September October November December".split(" "),t="Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),w=[31,28,31,30,31,30,31,31,30,31,30,31],g=new Date,n=new Date,q=null,m="",r="12:00 AM",d,k="";s.prototype.r=function(){var c=(new Date(this.c,this.e,1)).getDay(),l=w[this.e];1==this.e&&(0==this.c%4&&0!=this.c%100||0==this.c%400)&&(l=29);var a;a=this.e;if(!1!==d.j){for(var e='<select class="simple-calendar-month form-control">',
f=0;f<t.length;f++)e+='<option value="'+f+'" '+(f==a?"selected":"")+">"+t[f]+"</option>";a='<div style="width: 60%; text-align: right">'+(e+"</select>")+"</div>"}else a='<div style="width: 60%; text-align: center; line-height: 22px;">'+v[a]+"</div>";e=this.c;if(!1!==d.o){var f='<select class="simple-calendar-year form-control">',b=g.getFullYear(),h=[];0!=d.m?h=d.m.split(":"):(h[0]=b-10,h[1]=b+10);for(b=h[0];b<=h[1];b++)f+='<option value="'+b+'" '+(b==e?"selected":"")+">"+b+"</option>";e='<div style="width: 40%; text-align: left" class="pull-right">'+
(f+"</select>")+"</div>"}else e='<div style="width: 40%; text-align: center; line-height: 22px" class="pull-right">'+e+"</div>";a='<table class="table table-condense table-striped table-bordered"><tr><th><a class="simple-calendar-move btn-prev glyphicon glyphicon-chevron-left" href="javascript:;"></a></th><th colspan="5" style="text-align:center; padding: '+(!1!==d.j?"2":"4")+'px;">'+e+" "+a+'</th><th><a class="simple-calendar-move btn-next glyphicon glyphicon-chevron-right" href="javascript:;"></a></th></tr><tr class="calendar-header">';
for(e=0;6>=e;e++)a+='<td class="calendar-header-day">',a+=u[e],a+="</td>";a+="</tr><tr>";f=1;for(e=0;9>e;e++){h=this.e+1;for(b=0;6>=b;b++)if(f<=l&&(0<e||b>=c)){var k=this.c+"-"+(10>h?"0"+h:h)+"-"+(10>f?"0"+f:f);a+='<td><a href="javascript:;" class="day-item'+(this.e==n.getMonth()&&this.c==n.getFullYear()&&f==n.getDate()?" today":"")+(k==m?" selected":"")+'" data-date="'+k+'">';a+=f;a+="</a></td>";f++}else a+="<td></td>";if(f>l)break;else a+="</tr><tr>"}a+="</tr>";if(1==d.f){c="";l="00";f="AM";h="";
for(e=0;24>e;)f=12>e?"AM":"PM",h=0==e?12:10>e?"0"+e:e,12<h&&(h=10>h-12?"0"+(h-12):h-12),f=h+":"+l+" "+f,c+='<option value="'+(10>e?"0"+e:e)+":"+l+'" '+(r==f?"selected":"")+">"+f+"</option>","30"==l?(l="00",e++):l="30";a+='<tr><td style="line-height: 22px; font-weight: bold; padding: 2px" align="center" colspan="2">Time: </td><td style="padding: 2px" colspan="3"><select class="simple-calendar-time form-control">'+c+'</select></td><td style="line-height: 22px; font-weight: bold; padding: 2px" align="center" colspan="2"><button type="button" class="btn btn-default btn-xs btn-calendar-ok">Select</button></td></tr>'}this.l=
a+"</table>"};c.B.K=function(n){d=c.extend({},{n:"btn-default",q:"Select Date",g:"YYYY-MM-dd",G:0,m:!1,j:!1,o:!1,f:!1},n);g.setHours(0);g.setMinutes(0);g.setSeconds(0);return this.w(function(l,a){c(a).C();c(a).data("settings",JSON.stringify(d));var e=k=c(a).i("id"),f=c(this).b();g=isNaN(Date.parse(f))?new Date:new Date(Date.parse(f));f=g.toISOString();m=f.split("T")[0];q=c('<div class="dropdown simple-calendar" data-id="'+e+'"><button class="btn '+d.n+' dropdown-toggle" type="button" data-toggle="dropdown"><div class="selected-text">'+
d.q+'</div> <span class="caret"></span></button><div class="dropdown-menu" role="menu" style="padding: 0" id="meals-calendar-container"></div></div>').I({"shown.bs.dropdown":function(){this.d=!0},mousedown:function(b){b=c(b.target);b.h("day-item")&&(c(this).find(".table a").J("selected"),b.t("selected"))},click:function(b){b=c(b.target);this.d=!0;if(b.h("simple-calendar-move")||b.is("select")||b.is("option"))this.d=!1;else if(b.h("day-item")){1==d.f&&(this.d=!1);b=m=b.i("data-date");if(1==d.f){var e=
r=c('[data-id="'+k+'"]').find(".simple-calendar-time option:selected").text();b+=" "+e}c.format&&(b=c.format.k((new Date(Date.parse(b))).toISOString(),d.g));c(a).b(b).a()}},"hide.bs.dropdown":function(){var b=this;setTimeout(function(){b.d=!0},1E3);return this.d},change:function(b){if(c(b.target).h("simple-calendar-time")){1==d.f&&(this.d=!1);b=m;if(1==d.f){var e=r=c('[data-id="'+k+'"]').find(".simple-calendar-time option:selected").text();b+=" "+e}c.format&&(b=c.format.k((new Date(Date.parse(b))).toISOString(),
d.g));c(a).b(b).a()}},"shown.bs.dropdown.position-calculator":function(b,a){var d=c('[data-id="'+k+'"]').find(".dropdown-menu",b.target),e=a.relatedTarget;d.p({top:0,left:0});e=(new c.s({item:d,target:e,D:"top left",F:{y:3,x:0,H:!0},L:"bottom left",A:"both"})).v();d.p({top:e.moveBy.y+"px",left:e.moveBy.x+"px"})}});q.find("button").click(function(){k=c(a).i("id");d=JSON.parse(c(a).data("settings"));c(a).a()});c(a).u(q);c(a).a(function(){var b=c(this).b().replace(/\-/g,"/");if(isNaN(Date.parse(b))){g=
new Date;var a=g.toISOString();m=a.split("T")[0]}else b=b.split("/"),g=new Date,g.setMonth(b[0]-1),g.setDate(b[1]),g.setFullYear(b[2]),a=g.toISOString(),m=a.split("T")[0],c.format&&(b=c.format.k(a,d.g)),c('[data-id="'+k+'"]').find(".selected-text").text(b);c('[data-id="'+k+'"]').find(".dropdown-menu").empty().append(p())})})}})(jQuery);
