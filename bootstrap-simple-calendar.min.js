
!function(e){function t(e){if(d.changeYear!==!1){var t='<select class="simple-calendar-year form-control">',a=f.getFullYear(),n=[]
0!=d.yearRange?n=d.yearRange.split(":"):(n[0]=a-10,n[1]=a+10)
for(var r=n[0];r<=n[1];r++)t+='<option value="'+r+'" '+(r==e?"selected":"")+">"+r+"</option>"
return t+="</select>",'<div style="width: 40%; text-align: left" class="pull-right">'+t+"</div>"}return'<div style="width: 40%; text-align: center; line-height: 22px" class="pull-right">'+e+"</div>"}function a(e){if(d.changeMonth!==!1){for(var t='<select class="simple-calendar-month form-control">',a=0;a<u.length;a++)t+='<option value="'+a+'" '+(a==e?"selected":"")+">"+u[a]+"</option>"
return t+="</select>",'<div style="width: 60%; text-align: right">'+t+"</div>"}return'<div style="width: 60%; text-align: center; line-height: 22px;">'+h[e]+"</div>"}function n(e,t){this.month=isNaN(e)||null==e?f.getMonth():e,this.year=isNaN(t)||null==t?f.getFullYear():t,this.html=""}function r(){var e=f.getMonth(),t=f.getFullYear()
e+=1,12==e&&(e=0,t+=1,f.setFullYear(t)),f.setMonth(e),m.find(".dropdown-menu").empty().append(i())}function l(){var e=f.getMonth(),t=f.getFullYear()
e-=1,0>e&&(e=11,t-=1,f.setFullYear(t)),f.setMonth(e),m.find(".dropdown-menu").empty().append(i())}function s(e,t){f.setFullYear(t),f.setMonth(e),m.find(".dropdown-menu").empty().append(i())}function i(){var t=f.getMonth(),a=f.getFullYear(),i=new n(t,a)
i.generateHTML()
var o=e(i.getHTML())
return o.find("a.btn-next").click(function(){r()}),o.find("a.btn-prev").click(function(){l()}),o.find("select.simple-calendar-month").change(function(){var t=e(this).val(),a=o.find("select.simple-calendar-year").val()
s(t,a)}),o.find("select.simple-calendar-year").change(function(){o.find("select.simple-calendar-month").change()}),o}function o(e){var t=e.split("T")[0]
return t}var d,c=["Su","Mo","Tu","We","Th","Fr","Sa"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],p=[31,28,31,30,31,30,31,31,30,31,30,31],f=new Date,g=new Date,m=null,v=""
n.prototype.generateHTML=function(){var e=new Date(this.year,this.month,1),n=e.getDay(),r=p[this.month]
1==this.month&&(this.year%4==0&&this.year%100!=0||this.year%400==0)&&(r=29)
for(var l=a(this.month),s=t(this.year),i='<table class="table table-condense table-striped table-bordered"><tr><th><a class="simple-calendar-move btn-prev glyphicon glyphicon-chevron-left" href="javascript:;"></a></th><th colspan="5" style="text-align:center; padding: '+(d.changeMonth!==!1?"2":"4")+'px;">'+s+l+'</th><th><a class="simple-calendar-move btn-next glyphicon glyphicon-chevron-right" href="javascript:;"></a></th></tr><tr class="calendar-header">',o=0;6>=o;o++)i+='<td class="calendar-header-day">',i+=c[o],i+="</td>"
i+="</tr><tr>"
for(var h=1,o=0;9>o;o++){for(var u=this.month+1,f=0;6>=f;f++)if(r>=h&&(o>0||f>=n)){var m=this.year+"-"+(10>u?"0"+u:u)+"-"+(10>h?"0"+h:h)
i+='<td><a href="javascript:;" class="day-item'+(this.month==g.getMonth()&&this.year==g.getFullYear()&&h==g.getDate()?" today":"")+(m==v?" selected":"")+'" data-date="'+m+'">',i+=h,i+="</a></td>",h++}else i+="<td></td>"
if(h>r)break
i+="</tr><tr>"}i+="</tr></table>",this.html=i},n.prototype.getHTML=function(){return this.html},e.fn.simpleCalendar=function(t){var a={bsBtnClass:"btn-default",defaultText:"Select Date",dateFormat:"YYYY-MM-dd",maxDate:0,yearRange:!1,changeMonth:!1,changeYear:!1}
return d=e.extend({},a,t),f.setHours(0),f.setMinutes(0),f.setSeconds(0),this.each(function(t,a){e(a).hide(),m=e('<div class="dropdown simple-calendar"><button class="btn '+d.bsBtnClass+' dropdown-toggle" type="button" data-toggle="dropdown"><div class="selected-text">'+d.defaultText+'</div> <span class="caret"></span></button><div class="dropdown-menu" role="menu" style="padding: 0" id="meals-calendar-container"></div></div>').on({"shown.bs.dropdown":function(){this.closable=!0},mousedown:function(t){var a=e(t.target)
a.hasClass("day-item")&&(e(this).find(".table a").removeClass("selected"),a.addClass("selected"))},click:function(t){var n=e(t.target)
if(console.log(n),this.closable=!0,n.hasClass("simple-calendar-move")||n.is("select")||n.is("option"))this.closable=!1
else if(n.hasClass("day-item")){var r=v=n.attr("data-date")
if(e.format){var l=e.format.date(new Date(Date.parse(r)).toISOString(),d.dateFormat)
e(a).val(l).change()}else e(a).val(r).change()}},"hide.bs.dropdown":function(){var e=this
return setTimeout(function(){e.closable=!0},1e3),this.closable}}),m.find("button").click(function(){e(a).change()}),e(a).after(m),e(a).change(function(){var t=e(this).val()
if(isNaN(Date.parse(t)))return void m.find(".dropdown-menu").empty().append(i())
f=new Date(Date.parse(t))
var a=f.toISOString()
v=o(a),e.format&&(t=e.format.date(new Date(Date.parse(t)).toISOString(),d.dateFormat)),m.find(".selected-text").text(t),m.find(".dropdown-menu").empty().append(i())})})}}(jQuery)
